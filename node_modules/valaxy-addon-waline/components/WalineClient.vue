<script lang="ts" setup>
import { isDark } from 'valaxy'
import { computed } from 'vue'
import { useI18n } from 'vue-i18n'
import { useRoute } from 'vue-router'
// @ts-expect-error vue waline component type
import { Waline } from '@waline/client/dist/component'
import { getEmojis } from '../utils'

import '@waline/client/dist/waline.css'
import type { WalineOptions } from '../types'

const props = defineProps<{
  options: WalineOptions
}>()

const route = useRoute()
const { locale } = useI18n()
const path = computed(() => props.options.path || route.path.replace(/\/$/, ''))
const emoji = computed(() => getEmojis(props.options.cdn))
</script>

<template>
  <Waline :server-u-r-l="options.serverURL" :lang="locale" :path="path" :dark="isDark" :emoji="emoji" />
</template>

<style>
:root {
  --waline-theme-color: var(--va-c-primary);
  --waline-active-color: var(--va-c-primary-light);
}
</style>
